function [y1] = NNval20new(x1)
%NNVAL20NEW neural network simulation function.
%
% Auto-generated by MATLAB, 29-Oct-2019 18:35:48.
% 
% [y1] = NNval20new(x1) takes these arguments:
%   x = 6xQ matrix, input #1
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-3;-3;-1;-1;-1;-1];
x1_step1.gain = [0.333333333333333;0.333333333333333;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.31260430751443885056;-0.10256697433122383134;-0.10440192072176938953;1.2385600339621647414;-0.71240872480981398684;-1.1049822305102443565;-4.6236832306733264275;-0.51821572628601109134;0.81801101764921080317;-0.64729164251569837329;-0.62665418511109183264;-0.33385143861361882278;-0.29897093621486836579;0.44817903065299574683;0.053715159012802979333;-1.703876557325073593;0.99714478286168251042;-2.2737999715689136693;-0.17254933237255462575;-0.88639276288987733921];
IW1_1 = [3.3243765411215457917 -0.28797265288196949307 0.31522335946394769435 -0.0093868236767202500176 0.39868202421077103548 -0.025752993291124012115;-19.067571536410184763 0.31443779416359490808 -0.20266381013959686164 -0.2136963799975466205 0.15670040842689092475 0.4141770582371261944;-0.89164400550835742898 -0.40230596341630370238 -0.11263247525517981751 -0.033432130306246719831 -0.15216988455965022031 -0.045823533024141521741;1.2185776100971128511 -0.30282559392699043288 0.76187121646372957251 -0.037759142650717537892 0.81257182021027341001 0.048009072091282911643;-18.12954025949140302 0.23158399036865534582 -0.93841506488051973367 -0.43891476653184618995 -0.49840547656005879107 0.12569760949592262422;-1.0799167651266301515 0.2206254212400090009 -0.63516214575625284944 0.0063944152168330676417 -0.65462001777614875486 -0.026870011948383905331;-1.5859717466969716071 2.6386159526289043598 0.1224589061346277874 0.8795004968421098468 -0.13254854523934794797 0.39857609989427578157;-4.3237917404807673094 0.028802236119134419501 -0.42286280576994766944 -0.017729949953994073031 -0.52943668561180656784 0.030869766951544256456;4.1245870323594120421 0.72157213941155318171 0.18140595319077157388 -0.11724396567759140519 0.33183502967323258437 -0.019862767653594893408;2.0107243827972061112 -0.94915927732057103761 0.34398489147457006476 -0.031501328755181454144 0.29923102007394830615 -0.082082362463941960229;-0.31020312543883993284 1.0150907885649749218 0.013564295253200351829 0.2668551954806581139 -0.0024302738403105140358 0.20776930966050519145;-0.97134779019098715924 -0.54901093103083209446 -0.14742357471986955453 -0.069641711903582884102 -0.16899440798781922846 -0.073830944600120074206;-16.719447672661974735 0.27046144161395102579 -0.38716618520568346629 -0.24469349541551291272 -0.046016852085610737699 0.28688264379170047569;-6.405933841214264568 1.0952480604479164494 -0.75222261172794224748 -0.036370504021079150259 -0.64907074193387481742 -0.018228787265663320971;0.12510772707921791191 0.30737180011021508763 -0.097361217564397931068 -0.049769233152991802782 -0.039357736051819400269 0.017629514599393415752;-5.5711055580426425138 -0.34309630487789666287 -1.1299779226521382558 -0.1626218009850459445 -1.2473960871415765705 0.051471059219474313284;7.6107686312832329989 0.11137461221781506937 0.88158881213931072907 0.091543866474325677474 1.0140793343881808752 -0.040345086605555677273;1.8011118764325237951 0.73915397306565844282 1.9676483772500188429 0.92672377959885321452 1.5370119133979152082 0.19541811866898572969;0.0038042917314180919007 0.099632464248461588552 -0.051664891600444545761 -0.14256931227280605912 -0.014621432601009195715 0.038457740564693761176;-20.369446416800158772 0.19894634934915053637 -1.3886144105216282618 -0.5952702200259277765 -0.86686261172835987754 0.050497671967117588321];

% Layer 2
b2 = 1.0168622754556433385;
LW2_1 = [-1.5451139705440060101 -3.7657185516804001502 -2.7843486690171670439 0.73407901780169182437 -7.170731891521588075 1.2031176646393462182 0.14565079452847137786 -2.4168931186834172742 -0.26663377748701672099 0.26599359690706553261 0.4259808371127425386 1.8750064119139839836 7.2650295826260178345 -0.21719864128792609748 -1.6417705038918029015 0.18791927255463330981 -0.89371842560498704344 -0.030902759859013532312 1.4485661680670745 3.785475031913644095];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.106967270368547;
y1_step1.xoffset = 5.079642;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
